\ProvidesPackage{beamerthemeTealOceanPdflatex}

%\mode<presentation>
\setbeamersize{text margin left=0.5cm,text margin right=0.5cm}

\usepackage{etoolbox}
\usepackage{tikz}
\usepackage{graphicx}
\usepackage{lmodern} % Use Latin Modern fonts, works with pdflatex

% Color definitions from the custom oceanic palette
\definecolor{base0}{HTML}{DAE4E5}
\definecolor{base1}{HTML}{94C0C2}
\definecolor{accent1}{HTML}{69A4A2}
\definecolor{accent2}{HTML}{296E6B}
\definecolor{accent3}{HTML}{2B4A4A}

% General Beamer color settings
\setbeamercolor{normal text}{fg=black, bg=base0}
\setbeamercolor{structure}{fg=accent2}
\setbeamercolor{alerted text}{fg=accent2}
\setbeamercolor{example text}{fg=accent3}
\setbeamercolor{titlelike}{fg=white,bg=accent3}

% Set the default font family to Latin Modern
\setbeamerfont{normal text}{family=\rmfamily}
\setbeamerfont{frametitle}{family=\rmfamily}
\setbeamerfont{title}{family=\rmfamily}
\setbeamerfont{subtitle}{family=\rmfamily}
\setbeamerfont{author}{family=\rmfamily}
\setbeamerfont{institute}{family=\rmfamily}
\setbeamerfont{date}{family=\rmfamily}

% Improved font sizes for better readability during presentation
\setbeamerfont{text}{size=\footnotesize}
\setbeamerfont{normal text}{size=\footnotesize}
\setbeamerfont{frametitle}{size=\footnotesize, series=\bfseries}
\setbeamerfont{title}{size=\footnotesize, series=\bfseries}
\setbeamerfont{subtitle}{size=\footnotesize}
\setbeamerfont{author}{size=\footnotesize}
\setbeamerfont{institute}{size=\footnotesize}
\setbeamerfont{date}{size=\footnotesize}
\setbeamerfont{section in toc}{size=\footnotesize}
\setbeamerfont{subsection in toc}{size=\footnotesize}
\setbeamerfont{itemize/enumerate item}{size=\scriptsize}
\setbeamerfont{itemize/enumerate subitem}{size=\scriptsize}
\setbeamerfont{itemize/enumerate subsubitem}{size=\scriptsize}
\setbeamerfont{itemize/enumerate subbody}{size=\scriptsize}
\setbeamerfont{itemize/enumerate body}{size=\scriptsize}

% Set the default font size for blocks
\setbeamerfont{block title}{size=\footnotesize, series=\bfseries}
\setbeamerfont{block body}{size=\footnotesize}

% Set the default font size for footnotes
\setbeamerfont{footnote}{size=\footnotesize}

% Better itemize symbols and spacing
\setbeamertemplate{itemize item}{\color{accent2}$\blacktriangleright$}
\setbeamertemplate{itemize subitem}{\color{accent1}$\triangleright$}
\setbeamertemplate{itemize subsubitem}{\color{accent1}$-$}

% Frametitle bar with logo (with left/right padding and vertically centered logo)
\setbeamertemplate{frametitle}{
  \vbox{}\vskip-3.1ex
  \begin{beamercolorbox}[wd=\paperwidth,ht=4ex,dp=2ex,leftskip=0.5cm,rightskip=0.5cm]{frametitle}%
    \usebeamerfont{frametitle}\insertframetitle%
    \hfill
    \raisebox{-1ex}{\includegraphics[height=4ex]{figures/tm-logo-nobg-quarter.png}}%
  \end{beamercolorbox}%
}

% Title page elements
\setbeamercolor{title}{fg=white, bg=accent3}
\setbeamercolor{subtitle}{fg=base1}
\setbeamercolor{author}{fg=base1}
\setbeamercolor{institute}{fg=base1}
\setbeamercolor{date}{fg=base1}

% Block environments
\setbeamercolor{block title}{bg=accent1, fg=white}
\setbeamercolor{block body}{bg=base0, fg=black}

\setbeamercolor{block title alerted}{use=alerted text, bg=accent2, fg=white}
\setbeamercolor{block body alerted}{use=alerted text, bg=base0, fg=black}

\setbeamercolor{block title example}{bg=accent3, fg=white}
\setbeamercolor{block body example}{bg=base0, fg=black}

% Navigation symbols off
\setbeamertemplate{navigation symbols}{}

% Footer with slide number X/Y
\setbeamertemplate{footline}{
  \leavevmode%
  \hbox{%
    \begin{beamercolorbox}[wd=.98\paperwidth,ht=2.5ex,dp=1ex,leftskip=1em,rightskip=1em]{author in head/foot}%
      \hfill
      \usebeamerfont{footline}\color{accent2}
      \insertframenumber{} / \inserttotalframenumber
    \end{beamercolorbox}%
  }%
}

% Add vertical space after footline
\addtobeamertemplate{footline}{}{\vspace{0.2cm}}

% Final title slide setup
\setbeamertemplate{title page}
{
  \vbox{}
  \vfill
  \begin{centering}
    \begin{beamercolorbox}[sep=12pt,center]{title}
      \usebeamerfont{title}\inserttitle\par%
      \ifx\insertsubtitle\@empty%
      \else%
        \vskip0.5em%
        {\usebeamerfont{subtitle}\usebeamercolor[fg]{subtitle}\insertsubtitle\par}%
      \fi%
    \end{beamercolorbox}%
    \vskip1.5em\par
    \begin{beamercolorbox}[sep=6pt,center]{author}
      \usebeamerfont{author}\insertauthor
    \end{beamercolorbox}
    \begin{beamercolorbox}[sep=4pt,center]{institute}
      \usebeamerfont{institute}\insertinstitute
    \end{beamercolorbox}
    \begin{beamercolorbox}[sep=4pt,center]{date}
      \usebeamerfont{date}\insertdate
    \end{beamercolorbox}
  \end{centering}
  \vfill
}